<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>HDAT9800 Health Data Visualisation &amp; Communication</title>
    <meta charset="utf-8" />
    <meta name="author" content="Tim Churches" />
    <script src="libs/header-attrs/header-attrs.js"></script>
    <link href="libs/tile-view/tile-view.css" rel="stylesheet" />
    <script src="libs/tile-view/tile-view.js"></script>
    <link href="libs/panelset/panelset.css" rel="stylesheet" />
    <script src="libs/panelset/panelset.js"></script>
    <link href="libs/animate.css/animate.xaringan.css" rel="stylesheet" />
    <link href="libs/vembedr/css/vembedr.css" rel="stylesheet" />
    <link rel="stylesheet" href="xaringan-themer.css" type="text/css" />
    <link rel="stylesheet" href="fonts.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">


class: middle, center, title-slide
background-image: url("images/justblackbutwhy.png")
background-size: cover

#&lt;br&gt;&lt;br&gt;HDAT9800 Health Data Visualisation &amp; Communication&lt;br&gt;&lt;br&gt;
## Chapter 2 Interactive Tutorial - blogging with `distill` 
#### Tim Churches&lt;br&gt;
#### UNSW Medicine
#### 8th June 2022












&lt;style type="text/css"&gt;
# for changing font size in code blocks
.remark-slide-content {
  font-size: 28px;
  padding: 20px 80px 20px 80px;
}
.remark-code, .remark-inline-code {
  background: #f0f0f0;
}
.remark-code {
  font-size: 24px;
}
.huge .remark-code { /*Change made here*/
  font-size: 200% !important;
}
.smallcode .remark-code { /*Change made here*/
  font-size: 80% !important;
}
.tiny .remark-code { /*Change made here*/
  font-size: 66% !important;
}
&lt;/style&gt;

---

# Agenda for Chapter 2 interactive session

- Chapter 1
  - lots of content 
  - learning SQL - a good idea but not essential
  - challenge solutions (to be posted in Teams)
  - Q &amp; A
  - assessment and requesting early marking

---

# Agenda for Chapter 2 interactive session, cont'd

- Chapter 2
  - deliberately less content this week
  - Q &amp; A
  - core readings (Wilke Chapters 1 &amp; 2 recap in preparation for Chapter 3)
  - hands-on blogging with `distill` for `R`
    - review of how the internet and Web work
    - types of web site architectures/platforms
    - the blogosphere as a means of technical communication
    - overview of `distill`
    - hands-on setting up your own blog site
    
---

# Chapter 1 recap

- lots of content
  - especially if you are new to `R` or to programming
  - don't panic!
  - we are here to help
  - no-one expects to to be an instant _Top Gun_ coder
  - it's a journey

---

![](images/r_rollercoaster.png)

---

![](images/code_hero.jpg)

---

# Chapter 1 recap

- git and GitHub confuse almost everyone at first
  - practice brings comfort

---

![](images/github_wickham_bryan_git_quote.png)

---

![](images/github_fall.png)


---

# Chapter 1 recap, cont'd

- `dplyr` and related packages (`tidyr`, `purrr`) worth learning
  - we'll cover `tidyr` and `purrr` briefly in a later interactive session 
  - learning SQL - a good idea, but not necessary for this course
- `dplyr`/`dbplyr` challenge solutions (to be posted in Teams)

---

![](images/data_cowboy.png)

---

# Chapter 1 recap, cont'd

- assessment
  - very easy, just to get you used to using `git` and `GitHub`
- procedure for [requesting early marking](https://cbdrh-hdat9800.github.io/requesting_early_marking.html)
- live demo of it (seeking a volunteer!)

---

# Chapter 1 recap, cont'd

- Q &amp; A

---

# Chapter 2

- deliberately less content this week
- Q &amp; A

![](images/rmarkdown_horst_smaller.jpeg)

---

![](images/rmarkdown_wizards.png)
---

# Wilke Chapter 1

- data visualisation is 50% art &amp; 50% science
  - most important thing is to accurately communicate the data without distortion or bias (the science)
  - but do so in an aesthetically pleasing way (the art)
- scientists tend to be good at the science but are often aesthetically challenged
- artists and designers tend to be good at preparing beautiful or pleasing visualisations, but care less about the accuracy of what they are presenting
- three parts:
  - from data to visualisation
  - principles of figure/chart design
  - miscellaneous topics (not core reading for this course)
  
---

# Wilke Chapter 1, cont'd

- good and bad examples, using the same data
  - **ugly** - a chart with aesthetics problems (a matter of taste) but otherwise clear, informative and accurate
  - **bad** - a chart with perceptual problems, making it unclear, confusing, too complicated or possibly deceiving
  - **wrong** - a chart with objective, mathematical errors, indisputably incorrect
  
---

![](images/ugly_bad_wrong.png)

---

# wrong!

[An incorrect meta-analysis detected due to an incorrect chart](https://github.com/timchurches/meta-analyses/blob/master/benefits-of-reproducible-research/benefits-of-reproducible-research.md)

---

# Wilke Chapter 2

- restates the principles espoused by Leland Wilkinson, building on Bertin

- all data visualisations map data values onto quantifiable features of the chart or graphic
  - we call these feature _aesthetics_ (in a particular, technical sense, different from the usual meaning of _aesthetics_)

---

# Aesthetics and data types

- aesthetics describe every aspect of a particular graphical element
  - for example, the _position_ of a point (described by _x_ and _y_ values in a 2D chart)
  - graphical elements have a _shape_, a _size_, a _colour_, a _line type_, a _line width_  etc

![](images/common-aesthetics-1.png)

---

# Data types in charts and graphics

![](images/types_of_chart_variables.png)

---

# What are the data types in this table?

![](images/example_data_types.png)

---

# Scales map data values onto aesthetics

- to map data values to _aesthetics_ we need to specify which data values correspond to which aesthetic values or characteristics
  - eg if our chart has an _x_ axis, we need to specify which data values (eg which column of data in a table/data frame) specify where element fall along the _x_ axis
  - this mapping is done via a _scale_
  - a _scale_ defines a unique mapping from data values to aesthetics
  - must be a one-to-one mapping, otherwise the graphic will be ambiguous or uninterpretable
  
![](images/basic-scales-example-1.png)

---

# Mapping data to aesthetics in practice

- three columns from the table we saw earlier mapped to aesthetics

![](images/temp-normals-vs-time-1.png)

---

# An alternative mapping of the same data to aesthetics

![](images/four-locations-temps-by-month-1.png)

---

# Five mappings of data to aesthetics

![](images/mtcars-five-scale-1.png)

---

# Blogging and the blogosphere

- blogs are a value means of communicating your work in health data science
  - as the primary means for presenting your results (but don’t forget peer-reviewed scientific publishing)
  - to talk about how you got your results
    - data collection/sources, statistics and epidemiology, software
  - to discuss or comment on (constructively!) on other people’s work
  - training material and guides for others

---

# Data science blogosphere

- very rich, and growing
- a nice blog site is a great addition to your CV/resumé
- [Top 40 R programming blogs to follow in 2022](https://blog.feedspot.com/r_programming_blogs/)
- [R Bloggers blog aggregation site](https://www.r-bloggers.com)
- [Tim Churches' health data science blog](https://timchurches.github.io/blog/)

---

# Let's build our own blog sites

- GitHub allows you to publish static web pages from a GitHub repository 
  - see [GitHub Pages](https://pages.github.com) for details
  - we will leverage that to host our personal blog sites
  - **static** in the sense that the blog site is a set of static files served up by the GitHub Pages web server
  - but we can modify and add to that set of files at any time, and the blog site content will be updated according
  - all managed via git 

---

# Distill

  - has a sound theoretical underpinning -- see [Hohman _et al_., 2020](https://distill.pub/2020/communicating-with-interactive-articles/)
- a very nice framework for data science blogging (and websites)
  - a Distil scientific website: https://cbdrh.github.io/covoidance/
- see the Distill web sites for details
  - [intro to Distill](https://blog.rstudio.com/2020/12/07/distill/)
  - [re-intro to Distill](https://www.rstudio.com/blog/distill/)
  - [reference documentation site](https://rstudio.github.io/distill/)

---

# Overview of steps in setting up you own blog site

- create a repository (repo) for the blog under your personal GitHub account
  - should be a public repository
- set up a new RStudio project and clone the blog repo to your computer
- set up a new Distill blog site project in the same directory that you cloned the repo to
- do some initial customisation of the blog site
- rebuild the blog site
- commit to git and push back to the GitHub repo
- enable GitHub Pages in GitHub
- check if it worked

---

# Maintaining your own blog site

- further customisation of your site
- modify an existing blog post
- add one or more new blog posts


---

# A video illustrating these steps 

- the steps are described in subsequent slides

<div class="vembedr">
<div>
<iframe src="https://www.youtube.com/embed/unur6FBh_x0" width="533" height="300" frameborder="0" allowfullscreen="" data-external="1"></iframe>
</div>
</div>

---

# Install packages

- you need to install the `distill` package
  - this will automatically install all the other packages it depends on


```r
install.packages("distill", dependencies = TRUE)
```

---

# Create a new GitHub repo for your blog

- call it whatever you wish
  - but put "blog" in the name
- go to your GitHub home page
  - create a new repository
  - make it a public repository
  
---

# Clone that repo to you local computer using RStudio

---

# Load `distill` and create a new web site


```r
library(distill)
create_blog(dir = ".", title = "My Blog")
```

---

# Exit RStudio then re-open your blog project in RStudio

- double click on the `.Rproj` file for yiur blog project to re-open the project in RStudio
  - this is necessary so that RStudio detects that you are using `distill` so that a **Build** tab appears in the upper-right pane in RStudio
  
---

# Set up GitHub Pages

- change Pages branch and directory to:
  - branch main
  - directory docs/ 

---

# Make a `.nojekyll` file in your blog repo

This tells Google Pages not to do any further transformation of web pages using something called `jekyll`


```r
file.create(".nojekyll")
```

---

# Adjust _site.yml to suit

- adjust the `output_dir` parameter to `docs`

---

# Build the site

- click on the **Build** tab in the upper-right pane in RStudio, then click **Build Website**

---

# Commit all modified files to git then push to GitHub

- then wait a bit
- check if published by accessing the URL for your GitHub Pages site provided in the Pages setup screen on GitHub

---

# Create a new post


```r
create_post("I love blogging")
```

- then knit that post so it is rendered
- rebuild the website (see above)
- commit all changes to git and push to GitHub

---

# Customise!

[https://rstudio.github.io/distill/](https://rstudio.github.io/distill/)

---

# Enough!

    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false,
"ratio": "16:9"
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
// add `data-at-shortcutkeys` attribute to <body> to resolve conflicts with JAWS
// screen reader (see PR #262)
(function(d) {
  let res = {};
  d.querySelectorAll('.remark-help-content table tr').forEach(tr => {
    const t = tr.querySelector('td:nth-child(2)').innerText;
    tr.querySelectorAll('td:first-child .key').forEach(key => {
      const k = key.innerText;
      if (/^[a-z]$/.test(k)) res[k] = t;  // must be a single letter (key)
    });
  });
  d.body.setAttribute('data-at-shortcutkeys', JSON.stringify(res));
})(document);
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
